<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA Neuro-UNINTA | Mestre Matheus</title>
    <style>
        :root { --ia-cyan: #00f2ff; --primary: #e30613; }
        body { margin: 0; background: #050a14; color: white; font-family: 'Inter', sans-serif; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        header { background: var(--primary); padding: 15px; text-align: center; font-weight: 800; box-shadow: 0 4px 15px rgba(227, 6, 19, 0.4); }
        #brain-viewport { flex: 1; width: 100%; height: 60vh; cursor: move; }
        .ia-panel { background: rgba(13, 17, 23, 0.9); padding: 25px; border-top: 2px solid var(--ia-cyan); text-align: center; backdrop-filter: blur(10px); }
        #ia-txt { font-size: 14px; color: var(--ia-cyan); margin-bottom: 15px; min-height: 40px; }
        .btn-analise { background: var(--primary); color: white; border: none; padding: 15px 35px; border-radius: 30px; font-weight: bold; cursor: pointer; transition: 0.3s; text-transform: uppercase; }
        .btn-analise:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--primary); }
    </style>
</head>
<body>

<header>SISTEMA DE ANÁLISE NEURAL PREVENTIVA</header>

<div id="brain-viewport"></div>

<div class="ia-panel">
    <p id="ia-txt">Aguardando comando do Mestre Matheus...</p>
    <button class="btn-analise" onclick="iniciarAnalise()">Iniciar Varredura IA</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/loaders/GLTFLoader.js"></script>

<script>
    // --- 1. CONFIGURAÇÃO DA CENA (THREE.JS) ---
    const container = document.getElementById('brain-viewport');
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x0a192f, 0.12);

    const camera = new THREE.PerspectiveCamera(35, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.z = 8;

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    container.appendChild(renderer.domElement);

    const light = new THREE.PointLight(var(--ia-cyan), 1.5);
    light.position.set(5, 5, 10);
    scene.add(light);
    scene.add(new THREE.AmbientLight(0xffffff, 0.2));

    // --- 2. MODELO TRANSPARENTE ---
    let brain = null;
    const loader = new THREE.GLTFLoader();
    
    // IMPORTANTE: Mude para o nome do arquivo transparente que você baixou
    loader.load('./seu-modelo-transparente.glb', (gltf) => {
        brain = gltf.scene;
        brain.traverse(c => {
            if (c.isMesh) {
                c.material = new THREE.MeshStandardMaterial({
                    color: 0x00f2ff,
                    emissive: 0x00f2ff,
                    emissiveIntensity: 0.5,
                    transparent: true,
                    opacity: 0.35, // Efeito vidro/fantasmagórico
                    roughness: 0,
                    metalness: 1
                });
            }
        });
        scene.add(brain);
    }, undefined, (e) => console.error("Erro no modelo:", e));

    // --- 3. VOZ DO ANTÔNIO + PULSAÇÃO ---
    function falarAntonio(texto) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(texto);
            const vozes = window.speechSynthesis.getVoices();
            
            // Trava exclusiva no Antônio
            const voz = vozes.find(v => v.name.includes('Antonio')) || vozes.find(v => v.lang.includes('pt-BR'));
            if (voz) msg.voice = voz;

            msg.onboundary = (event) => {
                if (brain) {
                    // Pulsação síncrona com a fala do Antônio
                    brain.scale.set(1.1, 1.1, 1.1);
                    brain.traverse(c => { if(c.isMesh) c.material.emissiveIntensity = 4; });
                    setTimeout(() => {
                        brain.scale.set(1, 1, 1);
                        brain.traverse(c => { if(c.isMesh) c.material.emissiveIntensity = 0.5; });
                    }, 120);
                }
            };

            document.getElementById('ia-txt').innerText = texto;
            window.speechSynthesis.speak(msg);
        }
    }

    function iniciarAnalise() {
        falarAntonio("Mestre Matheus, iniciando varredura no conectoma. O modelo transparente permite observar a atividade nas vias dopaminérgicas. Sistema operando em nível máximo.");
    }

    // --- 4. ANIMAÇÃO ---
    function animate() {
        requestAnimationFrame(animate);
        if (brain) brain.rotation.y += 0.005;
        renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });

    window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
</script>
</body>
</html>
